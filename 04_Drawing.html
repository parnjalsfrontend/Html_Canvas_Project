<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Advanced Drawing App</title>
    <style>
      .toolbar {
        margin-bottom: 12px;
      }

      .toolbar button {
        padding: 10px;
        margin-right: 7px;
        background: white;
        color: black;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      .toolbar button:hover {
        background: #ccc;
      }

      .color-palette {
        margin-top: 20px;
      }

      .color-swatch {
        width: 20px;
        height: 20px;
        display: inline-block;
        margin-right: 10px;
        border-radius: 50%;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <canvas id="myCanvas" width="700" height="400"></canvas>
    <button id="clearButton">Clear</button>
    <div class="toolbar">
      <button id="pencilTool">Pencil</button>
      <button id="brushTool">Brush</button>
      <button id="eraserTool">Eraser</button>
      <input type="color" id="colorPicker" />
      <select id="brushSize">
        <option value="1">1px</option>
        <option value="3">3px</option>
        <option value="5">5px</option>
      </select>
    </div>
    <div class="color-palette">
      <div class="color-swatch" style="background-color: black"></div>
      <div class="color-swatch" style="background-color: red"></div>
      <div class="color-swatch" style="background-color: green"></div>
      <div class="color-swatch" style="background-color: blue"></div>
    </div>

    <script>
      const canvas = document.getElementById("myCanvas");
      const ctx = canvas.getContext("2d");
      let isDrawing = false;
      let selectedTool = "pencil";
      let lastX, lastY;

      function startDrawing(event) {
        isDrawing = true;
        draw(event);
      }

      function draw(event) {
        if (!isDrawing) return;
        const x = event.clientX - canvas.offsetLeft;
        const y = event.clientY - canvas.offsetTop;
        ctx.lineTo(x, y);
        ctx.stroke();
      }

      function stopDrawing() {
        isDrawing = false;
        ctx.beginPath();
      }

      canvas.addEventListener("mousedown", startDrawing);
      canvas.addEventListener("mousemove", draw);
      canvas.addEventListener("mouseup", stopDrawing);
      canvas.addEventListener("mouseout", stopDrawing);

      const clearButton = document.getElementById("clearButton");
      clearButton.addEventListener("click", function () {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      });

      const colorSwatches = document.querySelectorAll(".color-swatch");
      colorSwatches.forEach((swatch) => {
        swatch.addEventListener("click", function () {
          const color = this.style.backgroundColor;
          ctx.strokeStyle = color;
        });
      });

      const brushSizeSelect = document.getElementById("brushSize");
      brushSizeSelect.addEventListener("change", function () {
        const brushSize = this.value;
        ctx.lineWidth = brushSize;
      });

      const pencilToolButton = document.getElementById("pencilTool");
      pencilToolButton.addEventListener("mousedown", function () {
        selectedTool = "pencil";
        ctx.globalCompositeOperation = "source-over";
      });

      const brushToolButton = document.getElementById("brushTool");
      brushToolButton.addEventListener("mousedown", function () {
        selectedTool = "brush";
        ctx.globalCompositeOperation = "multiply";
      });

      const eraserToolButton = document.getElementById("eraserTool");
      eraserToolButton.addEventListener("mousedown", function () {
        selectedTool = "eraser";
        ctx.globalCompositeOperation = "destination-out";
      });

      const colorPicker = document.getElementById("colorPicker");
      colorPicker.addEventListener("input", function () {
        const color = this.value;
        ctx.strokeStyle = color;
      });
    </script>
  </body>
</html>
